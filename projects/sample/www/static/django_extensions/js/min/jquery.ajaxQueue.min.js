(function(a){var b=a.ajax,c={},d=[],e=[];a.ajax=function(f){f=a.extend(f,a.extend({},a.ajaxSettings,f));var g=f.port;switch(f.mode){case"abort":return c[g]&&c[g].abort(),c[g]=b.apply(this,arguments);case"queue":var h=f.complete;f.complete=function(){h&&h.apply(this,arguments),a([b]).dequeue("ajax"+g)},a([b]).queue("ajax"+g,function(){b(f)});return;case"sync":var i=d.length;d[i]={error:f.error,success:f.success,complete:f.complete,done:!1},e[i]={error:[],success:[],complete:[]},f.error=function(){e[i].error=arguments},f.success=function(){e[i].success=arguments},f.complete=function(){e[i].complete=arguments,d[i].done=!0;if(i==0||!d[i-1])for(var b=i;b<d.length&&d[b].done;b++)d[b].error&&d[b].error.apply(a,e[b].error),d[b].success&&d[b].success.apply(a,e[b].success),d[b].complete&&d[b].complete.apply(a,e[b].complete),d[b]=null,e[b]=null}}return b.apply(this,arguments)}})(typeof window.jQuery=="undefined"&&typeof window.django!="undefined"?django.jQuery:jQuery)